(()=>{var e={123:e=>{e.exports='<svg id="icon-o-default" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm0 18.963c-7.2 0-13.037 5.837-13.037 13.037 0 7.2 5.837 13.037 13.037 13.037 7.2 0 13.037-5.837 13.037-13.037 0-7.2-5.837-13.037-13.037-13.037Z"></path></svg>'},769:e=>{e.exports='<svg fill="#f2b137" id="icon-o-win" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm0 18.963c-7.2 0-13.037 5.837-13.037 13.037 0 7.2 5.837 13.037 13.037 13.037 7.2 0 13.037-5.837 13.037-13.037 0-7.2-5.837-13.037-13.037-13.037Z"></path></svg>'},102:e=>{e.exports='<svg id="icon-x-default" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M15.002 1.147 32 18.145 48.998 1.147a3 3 0 0 1 4.243 0l9.612 9.612a3 3 0 0 1 0 4.243L45.855 32l16.998 16.998a3 3 0 0 1 0 4.243l-9.612 9.612a3 3 0 0 1-4.243 0L32 45.855 15.002 62.853a3 3 0 0 1-4.243 0L1.147 53.24a3 3 0 0 1 0-4.243L18.145 32 1.147 15.002a3 3 0 0 1 0-4.243l9.612-9.612a3 3 0 0 1 4.243 0Z" fill-rule="evenodd"></path></svg>'},118:e=>{e.exports='<svg fill="#31c3bd" id="icon-x-win" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M15.002 1.147 32 18.145 48.998 1.147a3 3 0 0 1 4.243 0l9.612 9.612a3 3 0 0 1 0 4.243L45.855 32l16.998 16.998a3 3 0 0 1 0 4.243l-9.612 9.612a3 3 0 0 1-4.243 0L32 45.855 15.002 62.853a3 3 0 0 1-4.243 0L1.147 53.24a3 3 0 0 1 0-4.243L18.145 32 1.147 15.002a3 3 0 0 1 0-4.243l9.612-9.612a3 3 0 0 1 4.243 0Z" fill-rule="evenodd"></path></svg>'}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{let e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];(i=E||(E={})).DEFAULT_PLAYER="X",i.PLAYER_X="X",i.PLAYER_O="O",(o=p||(p={})).DEFAULT="",o.PLAYER_VS_CPU="CPU",o.PLAYER_VS_PLAYER="PVP",(d=L||(L={})).DEFAULT_TURN="X",d.X_TURN="X",d.O_TURN="O",(c=m||(m={}))[c.X_POINTS=0]="X_POINTS",c[c.O_POINTS=0]="O_POINTS",c[c.TIES=0]="TIES",(u=h||(h={})).HOVER_DEFAULT="selected-board-mark-X",u.HOVER_X="board-X",u.HOVER_O="board-O",u.SELECTED_X="selected-by-X",u.SELECTED_O="selected-by-O",(_=y||(y={})).WINNER_X="X",_.WINNER_O="O",_.TIE="tie",_.DEFAULT_WINNER="";let t=function(t){return e.reduce((e,a)=>{let n=a.filter(e=>t.includes(e));return n.length===a.length&&e.push(...n),e},[])},n={currentPlayer:E.DEFAULT_PLAYER,firstTurn:E.PLAYER_X,cpuTurn:!1,players:{player1:E.PLAYER_O,player2:E.PLAYER_X},whoWinTurn:{X_WIN:!1,O_WIN:!1,ties:!1},game:{gameType:p.DEFAULT,playerTurn:L.DEFAULT_TURN,playersPoints:{X_points:[],O_points:[]},playersWinTurn:{X_turn:0,ties:0,O_turn:0}}},r=function(t){return e.some(e=>(function(e,t){let a={},n={};for(let t of e)a[t]=(a[t]||0)+1;for(let e of t)n[e]=(n[e]||0)+1;for(let e in a)if(!(e in n)||a[e]!==n[e])return!1;return!0})(e,t))},s=function(e){e===y.WINNER_X&&(n.whoWinTurn.X_WIN=!0,n.game.playersWinTurn.X_turn++),e===y.WINNER_O&&(n.whoWinTurn.O_WIN=!0,n.game.playersWinTurn.O_turn++),e===y.TIE&&(n.whoWinTurn.ties=!0,n.game.playersWinTurn.ties++)},l=function(){n.whoWinTurn.X_WIN=!1,n.whoWinTurn.O_WIN=!1,n.whoWinTurn.ties=!1,n.game.playersPoints.X_points=[],n.game.playersPoints.O_points=[]};var i,o,d,c,u,_,E,p,L,m,h,y,P=a(102),T=a.n(P),g=a(123),R=a.n(g);class O{static updateUI(e){this.data=e,this.updatePlayerUI(),this.showWhoTurn(),this.addSelectClassListener(),this.addHoverListeners()}static blockEventHandling(){this.parentElement.classList.add("block-event")}static unBlockEventHandlind(){this.parentElement.classList.remove("block-event")}static addBoxHandler(e,t=this.selectedBoxCounter){this.parentElement.addEventListener("click",function(a){let n=a.target,r=+n.id;"SELECTED"!==n.dataset.select&&n.classList.contains("board-box")&&(n.classList.contains("board-O")||n.classList.contains("board-X"))&&(n.dataset.select="SELECTED",!0===t()?e(r,!0):e(r))})}static addCpuChoice(e){let t;this.data=e;let[a]=this.selectClass(),n=Array.from(this.gameBox);do t=Math.floor(10*Math.random());while(!n[t]||"SELECTED"===n[t].dataset.select)let r=n[t],s=+n[t].id;return r.classList.add(a),r.dataset.select="SELECTED",s}static selectedBoxCounter(){let e=Array.from(document.querySelectorAll(".board-box"));for(let t of e)if(t instanceof HTMLElement&&(!t.dataset||"SELECTED"!==t.dataset.select))return!1;return!0}static addWinClass(e){e.forEach(e=>{let t=document.getElementById(String(e));t&&t.classList.contains("selected-by-X")?t.classList.add("win-X"):t.classList.add("win-O")})}static showWhoTurn(){let e=document.querySelector(".gameplay__turn");e.innerHTML="";let t=this.generateMarkupTurn();e.insertAdjacentHTML("beforeend",t)}static generateMarkupTurn(){return this.data.currentPlayer===E.PLAYER_O?`      
    <svg class="gamplay__turn-icon">
    ${R()}
    </svg>
    <span class="gamplay__turn__text"> TURN</span>`:`
    <svg class="gamplay__turn-icon">
    ${T()}
    </svg>
    <span class="gamplay__turn__text"> TURN</span>`}static updatePlayerUI(){let e=document.querySelector(".O-text"),t=document.querySelector(".X-text");this.data.game.gameType===p.PLAYER_VS_PLAYER?(this.data.players.player1===E.PLAYER_O?e.textContent="O (P1)":e.textContent="O (P2)",this.data.players.player2===E.PLAYER_X?t.textContent="X (P2)":t.textContent="X (P1)"):(this.data.players.player1===E.PLAYER_O?e.textContent="O (YOU)":e.textContent="O (CPU)",this.data.players.player2===E.PLAYER_X?t.textContent="X (CPU)":t.textContent="X (YOU)")}static addSelectClassListener(){this.gameBox.forEach(e=>{e.addEventListener("click",this.addClickBox)})}static addHoverListeners(){this.gameBox.forEach(e=>{e.addEventListener("mouseenter",this.mouseEnterHandler),e.addEventListener("mouseout",this.mouseOutHandler)})}static handleMouseEnter(e){let[t,a]=this.hoverClass(),n=e.target;"SELECTED"!==n.dataset.select&&(n.classList.add(t),n.classList.remove(a))}static handleMouseOut(e){let[t,a]=this.hoverClass(),n=e.target;n.classList.remove(t),n.classList.remove(a)}static boxClick(e){let[t,a]=this.selectClass(),n=e.target;"SELECTED"!==n.dataset.select&&n.classList.contains("board-box")&&(n.classList.add(t),n.classList.remove(a))}static hoverClass(){return[this.data.currentPlayer===E.PLAYER_O?h.HOVER_O:h.HOVER_X,this.data.currentPlayer===E.PLAYER_O?h.HOVER_X:h.HOVER_O]}static selectClass(){return[this.data.currentPlayer===E.PLAYER_O?h.SELECTED_O:h.SELECTED_X,this.data.currentPlayer===E.PLAYER_O?h.SELECTED_X:h.SELECTED_O]}}O.parentElement=document.querySelector(".game-board"),O.gameBox=document.querySelectorAll(".board-box"),O.addClickBox=e=>{O.boxClick(e)},O.mouseEnterHandler=e=>{O.handleMouseEnter(e)},O.mouseOutHandler=e=>{O.handleMouseOut(e)};var A=a(118),v=a.n(A),f=a(769),Y=a.n(f);class X{constructor(){this.parentElement=document.querySelector(".modal-winner-window"),this.overlay=document.querySelector(".overlay"),this.data={}}showModal(e){this.data=e;let t=this.generateMarkup();this.parentElement.classList.remove("hidde"),this.overlay.classList.remove("hidde"),this.parentElement.innerHTML="",this.parentElement.insertAdjacentHTML("beforeend",t)}updateUI(e){this.data=e;let t=document.querySelector(".X"),a=document.querySelector(".O"),n=document.querySelector(".ties"),r=document.querySelectorAll(".board-box");t.textContent=`${e.game.playersWinTurn.X_turn}`,a.textContent=`${e.game.playersWinTurn.O_turn}`,n.textContent=`${e.game.playersWinTurn.ties}`,this.overlay.classList.add("hidde"),this.parentElement.classList.add("hidde"),r.forEach(e=>{e.classList.remove("selected-by-X"),e.classList.remove("selected-by-O"),e.classList.remove("win-X"),e.classList.remove("win-O"),e.removeAttribute("data-select")})}generateMarkup(){}}let w=new class extends X{addModalHandler(e){this.parentElement.addEventListener("click",t=>{let a=t.target;if(a.classList.contains("next__round__btn")&&e(!0,!1),a.classList.contains("quit__btn")){let t=document.querySelector(".game-board-section"),a=document.querySelector(".new-game");t.classList.add("hidde"),a.classList.remove("hidde"),e(!1,!1,!1)}})}generateMarkup(){return`
    <span class="modal__winner-text">${this.generateMarkupHeader()}</span>
    <div class="modal__header">
      ${this.generateMarkupText()}
    </div>
    <div class="modal__buttons">
      <button class="btn__left quit__btn">QUIT</button>
      <button class="btn__right next__round__btn">NEXT ROUND</button>
    </div>`}generateMarkupText(){return this.data.whoWinTurn.O_WIN?`
   <svg class="modal__winner__icon"${Y()}</svg>
   <span class="modal__header__text O__win__text"> TAKES THE ROUND </span>
    `:this.data.whoWinTurn.X_WIN?`
    <svg class="modal__winner__icon">${v()}</svg>
    <span class="modal__header__text X__win__text"> TAKES THE ROUND </span>
    `:this.data.whoWinTurn.ties?'\n    <span class="modal__header__text restart__text"> ROUND TIED </span>\n    ':""}generateMarkupHeader(){return this.data.game.gameType===p.PLAYER_VS_PLAYER?this.winnerAlgoritm("PLAYER 1 WINS!","PLAYER 2 WINS!"):this.data.game.gameType===p.PLAYER_VS_CPU?this.winnerAlgoritm("YOU WON!","OH NO, YOU LOST..."):""}winnerAlgoritm(e,t){return!0===this.data.whoWinTurn.O_WIN&&this.data.players.player1===E.PLAYER_O?e:!0===this.data.whoWinTurn.O_WIN&&this.data.players.player2===E.PLAYER_O?t:!0===this.data.whoWinTurn.X_WIN&&this.data.players.player1===E.PLAYER_X?e:!0===this.data.whoWinTurn.X_WIN&&this.data.players.player2===E.PLAYER_X?t:""}};class x extends X{constructor(){super(...arguments),this.resetGameBtn=document.querySelector(".reset-game")}addRenderModal(e){this.resetGameBtn.addEventListener("click",function(){e()})}addRestartModalHandler(e,t=this.toggleWindow){this.parentElement.addEventListener("click",function(a){let n=a.target;n.classList.contains("restart")?e(!1,!1,!0):n.classList.contains("cancle")&&(e(!1,!0),t())})}toggleWindow(){this.parentElement.classList.add("hidde"),this.overlay.classList.add("hidde")}generateMarkup(){return'\n    <div class="modal__header">\n    <span class="modal__header__text restart__text"> RESTART GAME? </span>\n    </div>\n    <div class="modal__buttons">\n      <button class="btn__left cancle">NO, CANCLE</button>\n      <button class="btn__right restart">YES, RESTART</button>\n    </div>'}}!function(e,t,a,n){var r,s=arguments.length,l=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(s<3?r(l):s>3?r(t,a,l):r(t,a))||l);s>3&&l&&Object.defineProperty(t,a,l)}([function(e,t,a){let n=a.value;return{configurable:!0,enumerable:!1,get(){return n.bind(this)}}}],x.prototype,"toggleWindow",null);let b=new x;class S{static addChoosePlayerHandler(e){this.parentElement.addEventListener("click",function(t){var a;let n=t.target;if(!n.closest(".PLAYER"))return;let r=null===(a=n.closest(".PLAYER"))||void 0===a?void 0:a.id,s=document.querySelector(".game-start__x-mark"),l=document.querySelector(".game-start__o-mark");"X"==r?(null==s||s.classList.add("selected"),null==l||l.classList.remove("selected")):(null==s||s.classList.remove("selected"),null==l||l.classList.add("selected")),e(r)})}}S.parentElement=document.querySelector(".player-choose");let C=function(e,a){!0!==n.cpuTurn&&(n.currentPlayer===E.PLAYER_X?(n.game.playersPoints.X_points.push(e),n.currentPlayer=E.PLAYER_O):(n.game.playersPoints.O_points.push(e),n.currentPlayer=E.PLAYER_X),M(),r(n.game.playersPoints.O_points)&&(s(y.WINNER_O),O.blockEventHandling(),O.addWinClass(t(n.game.playersPoints.O_points)),k()),r(n.game.playersPoints.X_points)&&(s(y.WINNER_X),O.blockEventHandling(),O.addWinClass(t(n.game.playersPoints.X_points)),k()),!0===a&&(O.blockEventHandling(),s(y.TIE),k()))},N=function(e,t){C(e,t),n.whoWinTurn.O_WIN||n.whoWinTurn.X_WIN||n.whoWinTurn.ties||U()},W=function(){O.updateUI(n),n.players.player1===E.PLAYER_O&&V(),n.players.player1===E.PLAYER_X&&B()},U=function(){var e,t,a,r;return e=this,t=void 0,r=function*(){O.blockEventHandling(),n.cpuTurn=!0,yield new Promise(e=>{setTimeout(()=>{for(;n.cpuTurn;){let t=O.addCpuChoice(n),a=O.selectedBoxCounter();n.cpuTurn=!1,C(t,a),e("resolved"),D()}},1e3)})},new(a=void 0,a=Promise)(function(n,s){function l(e){try{o(r.next(e))}catch(e){s(e)}}function i(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(l,i)}o((r=r.apply(e,t||[])).next())})},H=function(e,t,a){!1===t&&(!0===e?(n.firstTurn===E.PLAYER_X?(n.currentPlayer=E.PLAYER_O,n.firstTurn=E.PLAYER_O,n.game.playerTurn=L.O_TURN):n.firstTurn===E.PLAYER_O&&(n.currentPlayer=E.PLAYER_X,n.firstTurn=E.PLAYER_X,n.game.playerTurn=L.X_TURN),l(),I(),w.updateUI(n),M()):!0===a?q():location.reload())},I=function(){n.game.gameType===p.PLAYER_VS_CPU&&(n.players.player1===E.PLAYER_O&&n.currentPlayer===E.PLAYER_O&&B(),n.players.player1===E.PLAYER_O&&n.currentPlayer===E.PLAYER_X&&V(),n.players.player1===E.PLAYER_X&&n.currentPlayer===E.PLAYER_O&&V())},M=function(){O.updateUI(n)},k=function(){setTimeout(()=>{w.showModal(n)},700)},D=function(){setTimeout(()=>{O.unBlockEventHandlind()},1500)},q=function(){l(),n.game.gameType===p.PLAYER_VS_PLAYER&&(n.firstTurn===E.PLAYER_X&&(n.currentPlayer=E.PLAYER_X,n.game.playerTurn=L.X_TURN),n.firstTurn===E.PLAYER_O&&(n.currentPlayer=E.PLAYER_O,n.game.playerTurn=L.O_TURN)),n.game.gameType===p.PLAYER_VS_CPU&&(n.firstTurn===E.PLAYER_X&&n.players.player2===E.PLAYER_X?(n.currentPlayer=E.PLAYER_X,n.game.playerTurn=L.X_TURN,n.cpuTurn=!0):n.firstTurn===E.PLAYER_X&&n.players.player1===E.PLAYER_X?(n.currentPlayer=E.PLAYER_X,n.game.playerTurn=L.X_TURN):n.firstTurn===E.PLAYER_O&&n.players.player2===E.PLAYER_O?(n.currentPlayer=E.PLAYER_O,n.game.playerTurn=L.O_TURN,n.cpuTurn=!0):n.firstTurn===E.PLAYER_O&&n.players.player1===E.PLAYER_O&&(n.currentPlayer=E.PLAYER_O,n.game.playerTurn=L.O_TURN)),w.updateUI(n),M(),!0===n.cpuTurn&&V()},B=function(){D(),M(),O.addBoxHandler(N)},V=function(){O.blockEventHandling(),U(),O.addBoxHandler(N)};(class{static addGameModeHandler(e){window.addEventListener("click",function(t){let a=t.target,n=document.querySelector(".new-game"),r=document.querySelector(".game-board-section");if(!a.classList.contains("game-mode"))return;let s=a.id;return e(s),n.classList.add("hidde"),r.classList.remove("hidde"),s})}}).addGameModeHandler(function(e){n.game.gameType="PVP"===e?p.PLAYER_VS_PLAYER:p.PLAYER_VS_CPU,n.game.gameType===p.PLAYER_VS_PLAYER?(M(),O.addBoxHandler(C)):n.game.gameType===p.PLAYER_VS_CPU&&W(),console.log(n)}),S.addChoosePlayerHandler(function(e){"O"===e&&(n.players.player1=E.PLAYER_O,n.players.player2=E.PLAYER_X),"X"===e&&(n.players.player1=E.PLAYER_X,n.players.player2=E.PLAYER_O)}),b.addRenderModal(function(){b.showModal(n),b.addRestartModalHandler(H)}),w.addModalHandler(H)})()})();
//# sourceMappingURL=index.c2493c7a.js.map
