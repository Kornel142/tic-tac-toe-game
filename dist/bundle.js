(()=>{var e={123:e=>{e.exports='<svg id="icon-o-default" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm0 18.963c-7.2 0-13.037 5.837-13.037 13.037 0 7.2 5.837 13.037 13.037 13.037 7.2 0 13.037-5.837 13.037-13.037 0-7.2-5.837-13.037-13.037-13.037Z"></path></svg>'},769:e=>{e.exports='<svg fill="#f2b137" id="icon-o-win" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0Zm0 18.963c-7.2 0-13.037 5.837-13.037 13.037 0 7.2 5.837 13.037 13.037 13.037 7.2 0 13.037-5.837 13.037-13.037 0-7.2-5.837-13.037-13.037-13.037Z"></path></svg>'},102:e=>{e.exports='<svg id="icon-x-default" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M15.002 1.147 32 18.145 48.998 1.147a3 3 0 0 1 4.243 0l9.612 9.612a3 3 0 0 1 0 4.243L45.855 32l16.998 16.998a3 3 0 0 1 0 4.243l-9.612 9.612a3 3 0 0 1-4.243 0L32 45.855 15.002 62.853a3 3 0 0 1-4.243 0L1.147 53.24a3 3 0 0 1 0-4.243L18.145 32 1.147 15.002a3 3 0 0 1 0-4.243l9.612-9.612a3 3 0 0 1 4.243 0Z" fill-rule="evenodd"></path></svg>'},118:e=>{e.exports='<svg fill="#31c3bd" id="icon-x-win" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M15.002 1.147 32 18.145 48.998 1.147a3 3 0 0 1 4.243 0l9.612 9.612a3 3 0 0 1 0 4.243L45.855 32l16.998 16.998a3 3 0 0 1 0 4.243l-9.612 9.612a3 3 0 0 1-4.243 0L32 45.855 15.002 62.853a3 3 0 0 1-4.243 0L1.147 53.24a3 3 0 0 1 0-4.243L18.145 32 1.147 15.002a3 3 0 0 1 0-4.243l9.612-9.612a3 3 0 0 1 4.243 0Z" fill-rule="evenodd"></path></svg>'}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];var t,a,s,r,o,l;!function(e){e.DEFAULT_PLAYER="X",e.PLAYER_X="X",e.PLAYER_O="O"}(t||(t={})),function(e){e.DEFAULT="",e.PLAYER_VS_CPU="CPU",e.PLAYER_VS_PLAYER="PVP"}(a||(a={})),function(e){e.DEFAULT_TURN="X",e.X_TURN="X",e.O_TURN="O"}(s||(s={})),function(e){e[e.X_POINTS=0]="X_POINTS",e[e.O_POINTS=0]="O_POINTS",e[e.TIES=0]="TIES"}(r||(r={})),function(e){e.HOVER_DEFAULT="selected-board-mark-X",e.HOVER_X="board-X",e.HOVER_O="board-O",e.SELECTED_X="selected-by-X",e.SELECTED_O="selected-by-O"}(o||(o={})),function(e){e.WINNER_X="X",e.WINNER_O="O",e.TIE="tie",e.DEFAULT_WINNER=""}(l||(l={}));const i=function(t){return e.reduce(((e,n)=>{const a=n.filter((e=>t.includes(e)));return a.length===n.length&&e.push(...a),e}),[])},c={currentPlayer:t.DEFAULT_PLAYER,firstTurn:t.PLAYER_X,cpuTurn:!1,players:{player1:t.PLAYER_O,player2:t.PLAYER_X},whoWinTurn:{X_WIN:!1,O_WIN:!1,ties:!1},game:{gameType:a.DEFAULT,playerTurn:s.DEFAULT_TURN,playersPoints:{X_points:[],O_points:[]},playersWinTurn:{X_turn:0,ties:0,O_turn:0}}},d=function(t){return e.some((e=>function(e,t){const n={},a={};for(const t of e)n[t]=(n[t]||0)+1;for(const e of t)a[e]=(a[e]||0)+1;for(const e in n){if(!(e in a))return!1;if(n[e]!==a[e])return!1}return!0}(e,t)))},u=function(e){e===l.WINNER_X&&(c.whoWinTurn.X_WIN=!0,c.game.playersWinTurn.X_turn++),e===l.WINNER_O&&(c.whoWinTurn.O_WIN=!0,c.game.playersWinTurn.O_turn++),e===l.TIE&&(c.whoWinTurn.ties=!0,c.game.playersWinTurn.ties++)},_=function(){c.whoWinTurn.X_WIN=!1,c.whoWinTurn.O_WIN=!1,c.whoWinTurn.ties=!1,c.game.playersPoints.X_points=[],c.game.playersPoints.O_points=[]};var E,p=n(102),L=n.n(p),m=n(123),h=n.n(m);class y{static updateUI(e){this.data=e,this.updatePlayerUI(),this.showWhoTurn(),this.addSelectClassListener(),this.addHoverListeners()}static blockEventHandling(){this.parentElement.classList.add("block-event")}static unBlockEventHandlind(){this.parentElement.classList.remove("block-event")}static addBoxHandler(e,t=this.selectedBoxCounter){this.parentElement.addEventListener("click",(function(n){const a=n.target,s=+a.id;"SELECTED"!==a.dataset.select&&a.classList.contains("board-box")&&(a.classList.contains("board-O")||a.classList.contains("board-X"))&&(a.dataset.select="SELECTED",!0===t()?e(s,!0):e(s))}))}static addCpuChoice(e){this.data=e;const[t]=this.selectClass(),n=Array.from(this.gameBox);let a;do{a=Math.floor(10*Math.random())}while(!n[a]||"SELECTED"===n[a].dataset.select);const s=n[a],r=+n[a].id;return s.classList.add(t),s.dataset.select="SELECTED",r}static selectedBoxCounter(){const e=Array.from(document.querySelectorAll(".board-box"));for(const t of e)if(t instanceof HTMLElement&&(!t.dataset||"SELECTED"!==t.dataset.select))return!1;return!0}static addWinClass(e){e.forEach((e=>{const t=document.getElementById(String(e));t&&t.classList.contains("selected-by-X")?t.classList.add("win-X"):t.classList.add("win-O")}))}static showWhoTurn(){const e=document.querySelector(".gameplay__turn");e.innerHTML="";const t=this.generateMarkupTurn();e.insertAdjacentHTML("beforeend",t)}static generateMarkupTurn(){return this.data.currentPlayer===t.PLAYER_O?`      \n    <svg class="gamplay__turn-icon">\n    ${h()}\n    </svg>\n    <span class="gamplay__turn__text"> TURN</span>`:`\n    <svg class="gamplay__turn-icon">\n    ${L()}\n    </svg>\n    <span class="gamplay__turn__text"> TURN</span>`}static updatePlayerUI(){const e=document.querySelector(".O-text"),n=document.querySelector(".X-text");this.data.game.gameType===a.PLAYER_VS_PLAYER?(this.data.players.player1===t.PLAYER_O?e.textContent="O (P1)":e.textContent="O (P2)",this.data.players.player2===t.PLAYER_X?n.textContent="X (P2)":n.textContent="X (P1)"):(this.data.players.player1===t.PLAYER_O?e.textContent="O (YOU)":e.textContent="O (CPU)",this.data.players.player2===t.PLAYER_X?n.textContent="X (CPU)":n.textContent="X (YOU)")}static addSelectClassListener(){this.gameBox.forEach((e=>{e.addEventListener("click",this.addClickBox)}))}static addHoverListeners(){this.gameBox.forEach((e=>{e.addEventListener("mouseenter",this.mouseEnterHandler),e.addEventListener("mouseout",this.mouseOutHandler)}))}static handleMouseEnter(e){const[t,n]=this.hoverClass(),a=e.target;"SELECTED"!==a.dataset.select&&(a.classList.add(t),a.classList.remove(n))}static handleMouseOut(e){const[t,n]=this.hoverClass(),a=e.target;a.classList.remove(t),a.classList.remove(n)}static boxClick(e){const[t,n]=this.selectClass(),a=e.target;"SELECTED"!==a.dataset.select&&a.classList.contains("board-box")&&(a.classList.add(t),a.classList.remove(n))}static hoverClass(){return[this.data.currentPlayer===t.PLAYER_O?o.HOVER_O:o.HOVER_X,this.data.currentPlayer===t.PLAYER_O?o.HOVER_X:o.HOVER_O]}static selectClass(){return[this.data.currentPlayer===t.PLAYER_O?o.SELECTED_O:o.SELECTED_X,this.data.currentPlayer===t.PLAYER_O?o.SELECTED_X:o.SELECTED_O]}}E=y,y.parentElement=document.querySelector(".game-board"),y.gameBox=document.querySelectorAll(".board-box"),y.addClickBox=e=>{E.boxClick(e)},y.mouseEnterHandler=e=>{E.handleMouseEnter(e)},y.mouseOutHandler=e=>{E.handleMouseOut(e)};const P=y;var T=n(118),g=n.n(T),R=n(769),O=n.n(R);class f{constructor(){this.parentElement=document.querySelector(".modal-winner-window"),this.overlay=document.querySelector(".overlay"),this.data={}}showModal(e){this.data=e;const t=this.generateMarkup();this.parentElement.classList.remove("hidde"),this.overlay.classList.remove("hidde"),this.parentElement.innerHTML="",this.parentElement.insertAdjacentHTML("beforeend",t)}updateUI(e){this.data=e;const t=document.querySelector(".X"),n=document.querySelector(".O"),a=document.querySelector(".ties"),s=document.querySelectorAll(".board-box");t.textContent=`${e.game.playersWinTurn.X_turn}`,n.textContent=`${e.game.playersWinTurn.O_turn}`,a.textContent=`${e.game.playersWinTurn.ties}`,this.overlay.classList.add("hidde"),this.parentElement.classList.add("hidde"),s.forEach((e=>{e.classList.remove("selected-by-X"),e.classList.remove("selected-by-O"),e.classList.remove("win-X"),e.classList.remove("win-O"),e.removeAttribute("data-select")}))}generateMarkup(){}}const A=new class extends f{addModalHandler(e){this.parentElement.addEventListener("click",(t=>{const n=t.target;if(n.classList.contains("next__round__btn")&&e(!0,!1),n.classList.contains("quit__btn")){const t=document.querySelector(".game-board-section"),n=document.querySelector(".new-game");t.classList.add("hidde"),n.classList.remove("hidde"),e(!1,!1,!1)}}))}generateMarkup(){return`\n    <span class="modal__winner-text">${this.generateMarkupHeader()}</span>\n    <div class="modal__header">\n      ${this.generateMarkupText()}\n    </div>\n    <div class="modal__buttons">\n      <button class="btn__left quit__btn">QUIT</button>\n      <button class="btn__right next__round__btn">NEXT ROUND</button>\n    </div>`}generateMarkupText(){return this.data.whoWinTurn.O_WIN?`\n   <svg class="modal__winner__icon"${O()}</svg>\n   <span class="modal__header__text O__win__text"> TAKES THE ROUND </span>\n    `:this.data.whoWinTurn.X_WIN?`\n    <svg class="modal__winner__icon">${g()}</svg>\n    <span class="modal__header__text X__win__text"> TAKES THE ROUND </span>\n    `:this.data.whoWinTurn.ties?'\n    <span class="modal__header__text restart__text"> ROUND TIED </span>\n    ':""}generateMarkupHeader(){return this.data.game.gameType===a.PLAYER_VS_PLAYER?this.winnerAlgoritm("PLAYER 1 WINS!","PLAYER 2 WINS!"):this.data.game.gameType===a.PLAYER_VS_CPU?this.winnerAlgoritm("YOU WON!","OH NO, YOU LOST..."):""}winnerAlgoritm(e,n){return!0===this.data.whoWinTurn.O_WIN&&this.data.players.player1===t.PLAYER_O?e:!0===this.data.whoWinTurn.O_WIN&&this.data.players.player2===t.PLAYER_O?n:!0===this.data.whoWinTurn.X_WIN&&this.data.players.player1===t.PLAYER_X?e:!0===this.data.whoWinTurn.X_WIN&&this.data.players.player2===t.PLAYER_X?n:""}};class v extends f{constructor(){super(...arguments),this.resetGameBtn=document.querySelector(".reset-game")}addRenderModal(e){this.resetGameBtn.addEventListener("click",(function(){e()}))}addRestartModalHandler(e,t=this.toggleWindow){this.parentElement.addEventListener("click",(function(n){const a=n.target;a.classList.contains("restart")?e(!1,!1,!0):a.classList.contains("cancle")&&(e(!1,!0),t())}))}toggleWindow(){this.parentElement.classList.add("hidde"),this.overlay.classList.add("hidde")}generateMarkup(){return'\n    <div class="modal__header">\n    <span class="modal__header__text restart__text"> RESTART GAME? </span>\n    </div>\n    <div class="modal__buttons">\n      <button class="btn__left cancle">NO, CANCLE</button>\n      <button class="btn__right restart">YES, RESTART</button>\n    </div>'}}!function(e,t,n,a){var s,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([function(e,t,n){const a=n.value;return{configurable:!0,enumerable:!1,get(){return a.bind(this)}}}],v.prototype,"toggleWindow",null);const Y=new v;class X{static addChoosePlayerHandler(e){this.parentElement.addEventListener("click",(function(t){var n;const a=t.target;if(!a.closest(".PLAYER"))return;const s=null===(n=a.closest(".PLAYER"))||void 0===n?void 0:n.id,r=document.querySelector(".game-start__x-mark"),o=document.querySelector(".game-start__o-mark");"X"==s?(null==r||r.classList.add("selected"),null==o||o.classList.remove("selected")):(null==r||r.classList.remove("selected"),null==o||o.classList.add("selected")),e(s)}))}}X.parentElement=document.querySelector(".player-choose");const w=X;const x=function(e,n){!0!==c.cpuTurn&&(function(e){!function(e){c.currentPlayer===t.PLAYER_X?(c.game.playersPoints.X_points.push(e),c.currentPlayer=t.PLAYER_O):(c.game.playersPoints.O_points.push(e),c.currentPlayer=t.PLAYER_X)}(e)}(e),U(),function(e){d(c.game.playersPoints.O_points)&&(u(l.WINNER_O),P.blockEventHandling(),P.addWinClass(i(c.game.playersPoints.O_points)),H()),d(c.game.playersPoints.X_points)&&(u(l.WINNER_X),P.blockEventHandling(),P.addWinClass(i(c.game.playersPoints.X_points)),H()),!0===e&&(P.blockEventHandling(),u(l.TIE),H())}(n))},b=function(e,t){var n;x(e,t),(n=c).whoWinTurn.O_WIN||n.whoWinTurn.X_WIN||n.whoWinTurn.ties||C()},S=function(){P.updateUI(c),c.players.player1===t.PLAYER_O&&D(),c.players.player1===t.PLAYER_X&&k()},C=function(){return e=this,t=void 0,a=function*(){P.blockEventHandling(),c.cpuTurn=!0,yield new Promise((e=>{setTimeout((()=>{for(;c.cpuTurn;){const t=P.addCpuChoice(c),n=P.selectedBoxCounter();c.cpuTurn=!1,x(t,n),e("resolved"),I()}}),1e3)}))},new((n=void 0)||(n=Promise))((function(s,r){function o(e){try{i(a.next(e))}catch(e){r(e)}}function l(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}i((a=a.apply(e,t||[])).next())}));var e,t,n,a},N=function(e,n,a){!1===n&&(!0===e?(c.firstTurn===t.PLAYER_X?(c.currentPlayer=t.PLAYER_O,c.firstTurn=t.PLAYER_O,c.game.playerTurn=s.O_TURN):c.firstTurn===t.PLAYER_O&&(c.currentPlayer=t.PLAYER_X,c.firstTurn=t.PLAYER_X,c.game.playerTurn=s.X_TURN),_(),W(),A.updateUI(c),U()):!0===a?M():location.reload())},W=function(){c.game.gameType===a.PLAYER_VS_CPU&&(c.players.player1===t.PLAYER_O&&c.currentPlayer===t.PLAYER_O&&k(),c.players.player1===t.PLAYER_O&&c.currentPlayer===t.PLAYER_X&&D(),c.players.player1===t.PLAYER_X&&c.currentPlayer===t.PLAYER_O&&D())},U=function(){P.updateUI(c)},H=function(){setTimeout((()=>{A.showModal(c)}),700)},I=function(){setTimeout((()=>{P.unBlockEventHandlind()}),1500)},M=function(){_(),c.game.gameType===a.PLAYER_VS_PLAYER&&(c.firstTurn===t.PLAYER_X&&(c.currentPlayer=t.PLAYER_X,c.game.playerTurn=s.X_TURN),c.firstTurn===t.PLAYER_O&&(c.currentPlayer=t.PLAYER_O,c.game.playerTurn=s.O_TURN)),c.game.gameType===a.PLAYER_VS_CPU&&(c.firstTurn===t.PLAYER_X&&c.players.player2===t.PLAYER_X?(c.currentPlayer=t.PLAYER_X,c.game.playerTurn=s.X_TURN,c.cpuTurn=!0):c.firstTurn===t.PLAYER_X&&c.players.player1===t.PLAYER_X?(c.currentPlayer=t.PLAYER_X,c.game.playerTurn=s.X_TURN):c.firstTurn===t.PLAYER_O&&c.players.player2===t.PLAYER_O?(c.currentPlayer=t.PLAYER_O,c.game.playerTurn=s.O_TURN,c.cpuTurn=!0):c.firstTurn===t.PLAYER_O&&c.players.player1===t.PLAYER_O&&(c.currentPlayer=t.PLAYER_O,c.game.playerTurn=s.O_TURN)),A.updateUI(c),U(),!0===c.cpuTurn&&D()},k=function(){I(),U(),P.addBoxHandler(b)},D=function(){P.blockEventHandling(),C(),P.addBoxHandler(b)};(class{static addGameModeHandler(e){window.addEventListener("click",(function(t){const n=t.target,a=document.querySelector(".new-game"),s=document.querySelector(".game-board-section");if(!n.classList.contains("game-mode"))return;const r=n.id;return e(r),a.classList.add("hidde"),s.classList.remove("hidde"),r}))}}).addGameModeHandler((function(e){!function(e){c.game.gameType="PVP"===e?a.PLAYER_VS_PLAYER:a.PLAYER_VS_CPU}(e),c.game.gameType===a.PLAYER_VS_PLAYER?(U(),P.addBoxHandler(x)):c.game.gameType===a.PLAYER_VS_CPU&&S(),console.log(c)})),w.addChoosePlayerHandler((function(e){var n;"O"===(n=e)&&(c.players.player1=t.PLAYER_O,c.players.player2=t.PLAYER_X),"X"===n&&(c.players.player1=t.PLAYER_X,c.players.player2=t.PLAYER_O)})),Y.addRenderModal((function(){Y.showModal(c),Y.addRestartModalHandler(N)})),A.addModalHandler(N)})()})();